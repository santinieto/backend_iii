paths:
    # ===== AUTHENTICATION ENDPOINTS =====
    /api/auth/register:
        post:
            tags:
                - Authentication
            summary: Registrar un nuevo usuario
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/UserRegisterInput"
                required: true
            responses:
                201:
                    description: Usuario registrado exitosamente
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/RegisterResponse"
                400:
                    description: Solicitud incorrecta
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BadRequestResponse"
                500:
                    description: Error interno del servidor
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorResponse"

    /api/auth/login:
        post:
            tags:
                - Authentication
            summary: Iniciar sesión
            requestBody:
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                email:
                                    type: string
                                    format: email
                                password:
                                    type: string
                                    format: password
                            required:
                                - email
                                - password
                required: true
            responses:
                200:
                    description: Login exitoso
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/LoginResponse"
                401:
                    description: Credenciales inválidas
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"
                500:
                    description: Error interno del servidor
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorResponse"

    /api/auth/logout:
        get:
            tags:
                - Authentication
            summary: Cerrar sesión
            responses:
                200:
                    description: Sesión cerrada exitosamente
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    status:
                                        type: number
                                        example: 200
                                    message:
                                        type: string
                                        example: "Logout exitoso"

    /api/auth/profile:
        get:
            tags:
                - Authentication
            summary: Obtener perfil del usuario autenticado
            security:
                - bearerAuth: []
            responses:
                200:
                    description: Perfil del usuario
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UserResponse"
                401:
                    description: No autorizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"

    /api/auth/verify-account:
        post:
            tags:
                - Authentication
            summary: Verificar cuenta de usuario con código
            requestBody:
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                email:
                                    type: string
                                    format: email
                                    example: "usuario@ejemplo.com"
                                verificationCode:
                                    type: string
                                    example: "ABC123"
                            required:
                                - email
                                - verificationCode
                required: true
            responses:
                200:
                    description: Cuenta verificada exitosamente
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    response:
                                        type: string
                                        example: "Usuario 64f2a1e4b9c1a23d45678901 verificado correctamente"
                                    method:
                                        type: string
                                        example: "POST"
                                    url:
                                        type: string
                                        example: "/api/auth/verify-account"
                                    status:
                                        type: string
                                        example: "success"
                401:
                    description: Error al verificar cuenta
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"

    /api/auth/control-panel:
        get:
            tags:
                - Authentication
            summary: Obtener datos del panel de control (solo admin)
            security:
                - bearerAuth: []
            responses:
                200:
                    description: Datos del usuario administrador
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    response:
                                        $ref: "#/components/schemas/User"
                                    method:
                                        type: string
                                        example: "GET"
                                    url:
                                        type: string
                                        example: "/api/auth/control-panel"
                                    status:
                                        type: string
                                        example: "success"
                401:
                    description: No autorizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"
                403:
                    description: Acceso prohibido (requiere rol admin)
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"

    /api/auth/navbar:
        get:
            tags:
                - Authentication
            summary: Obtener datos del usuario para barra de navegación
            security:
                - bearerAuth: []
            responses:
                200:
                    description: Datos del usuario para navegación
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    response:
                                        $ref: "#/components/schemas/User"
                                    method:
                                        type: string
                                        example: "GET"
                                    url:
                                        type: string
                                        example: "/api/auth/navbar"
                                    status:
                                        type: string
                                        example: "success"
                401:
                    description: No autorizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"

    /api/auth/delete-product:
        get:
            tags:
                - Authentication
            summary: Obtener datos del usuario para eliminar producto (admin)
            security:
                - bearerAuth: []
            responses:
                200:
                    description: Datos del usuario administrador
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    response:
                                        $ref: "#/components/schemas/User"
                                    method:
                                        type: string
                                        example: "GET"
                                    url:
                                        type: string
                                        example: "/api/auth/delete-product"
                                    status:
                                        type: string
                                        example: "success"
                401:
                    description: No autorizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"
                403:
                    description: Acceso prohibido (requiere rol admin)
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"

    /api/auth/update-product:
        get:
            tags:
                - Authentication
            summary: Obtener datos del usuario para actualizar producto (admin)
            security:
                - bearerAuth: []
            responses:
                200:
                    description: Datos del usuario administrador
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    response:
                                        $ref: "#/components/schemas/User"
                                    method:
                                        type: string
                                        example: "GET"
                                    url:
                                        type: string
                                        example: "/api/auth/update-product"
                                    status:
                                        type: string
                                        example: "success"
                401:
                    description: No autorizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"
                403:
                    description: Acceso prohibido (requiere rol admin)
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"

    # ===== PRODUCTS ENDPOINTS =====
    /api/products:
        post:
            tags:
                - Products
            summary: Crear un nuevo producto
            security:
                - bearerAuth: []
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/ProductInput"
                required: true
            responses:
                201:
                    description: Producto creado correctamente
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ProductResponse"
                400:
                    description: Solicitud incorrecta
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BadRequestResponse"
                403:
                    description: Acceso prohibido (requiere rol admin)
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"
                500:
                    description: Error interno del servidor
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ErrorResponse"

        get:
            tags:
                - Products
            summary: Listar todos los productos
            responses:
                200:
                    description: Lista de productos
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ProductListResponse"
                404:
                    description: No se encuentran productos
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

    /api/products/{pid}:
        get:
            tags:
                - Products
            summary: Obtener producto por ID
            parameters:
                - in: path
                  name: pid
                  required: true
                  description: ID del producto
                  schema:
                      type: string
            responses:
                200:
                    description: Producto encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ProductResponse"
                404:
                    description: Producto no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

        put:
            tags:
                - Products
            summary: Actualizar producto
            security:
                - bearerAuth: []
            parameters:
                - in: path
                  name: pid
                  required: true
                  description: ID del producto
                  schema:
                      type: string
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/ProductInput"
                required: true
            responses:
                200:
                    description: Producto actualizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ProductResponse"
                403:
                    description: Acceso prohibido (requiere rol admin)
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"
                404:
                    description: Producto no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

        delete:
            tags:
                - Products
            summary: Eliminar producto
            security:
                - bearerAuth: []
            parameters:
                - in: path
                  name: pid
                  required: true
                  description: ID del producto
                  schema:
                      type: string
            responses:
                200:
                    description: Producto eliminado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ProductResponse"
                403:
                    description: Acceso prohibido (requiere rol admin)
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"
                404:
                    description: Producto no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

    # ===== CARTS ENDPOINTS =====
    /api/carts/create:
        post:
            tags:
                - Carts
            summary: Crear un nuevo carrito
            security:
                - bearerAuth: []
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/CartInput"
                required: true
            responses:
                201:
                    description: Carrito creado exitosamente
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CartResponse"
                400:
                    description: Solicitud incorrecta
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BadRequestResponse"
                401:
                    description: No autorizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/UnauthorizedResponse"

    /api/carts:
        get:
            tags:
                - Carts
            summary: Listar todos los carritos (solo admin)
            security:
                - bearerAuth: []
            responses:
                200:
                    description: Lista de carritos
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CartListResponse"
                403:
                    description: Acceso prohibido
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"

    /api/carts/{cid}:
        get:
            tags:
                - Carts
            summary: Obtener carrito por ID
            security:
                - bearerAuth: []
            parameters:
                - in: path
                  name: cid
                  required: true
                  description: ID del carrito
                  schema:
                      type: string
            responses:
                200:
                    description: Carrito encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CartResponse"
                404:
                    description: Carrito no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

        put:
            tags:
                - Carts
            summary: Actualizar carrito
            security:
                - bearerAuth: []
            parameters:
                - in: path
                  name: cid
                  required: true
                  description: ID del carrito
                  schema:
                      type: string
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/CartInput"
                required: true
            responses:
                200:
                    description: Carrito actualizado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CartResponse"
                404:
                    description: Carrito no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

        delete:
            tags:
                - Carts
            summary: Eliminar carrito (solo admin)
            security:
                - bearerAuth: []
            parameters:
                - in: path
                  name: cid
                  required: true
                  description: ID del carrito
                  schema:
                      type: string
            responses:
                200:
                    description: Carrito eliminado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CartResponse"
                403:
                    description: Acceso prohibido
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"
                404:
                    description: Carrito no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

    /api/carts/add-product:
        post:
            tags:
                - Carts
            summary: Agregar producto al carrito
            security:
                - bearerAuth: []
            requestBody:
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                cartId:
                                    type: string
                                productId:
                                    type: string
                                quantity:
                                    type: integer
                                    minimum: 1
                            required:
                                - cartId
                                - productId
                                - quantity
                required: true
            responses:
                200:
                    description: Producto agregado al carrito
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/CartResponse"
                400:
                    description: Solicitud incorrecta
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BadRequestResponse"

    # ===== ORDERS ENDPOINTS =====
    /api/orders:
        post:
            tags:
                - Orders
            summary: Crear una nueva orden (solo admin)
            security:
                - bearerAuth: []
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/OrderInput"
                required: true
            responses:
                201:
                    description: Orden creada exitosamente
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/OrderResponse"
                400:
                    description: Solicitud incorrecta
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BadRequestResponse"
                403:
                    description: Acceso prohibido
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ForbiddenResponse"

        get:
            tags:
                - Orders
            summary: Listar todas las órdenes
            responses:
                200:
                    description: Lista de órdenes
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/OrderListResponse"
                404:
                    description: No se encuentran órdenes
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

    /api/orders/{cid}:
        post:
            tags:
                - Orders
            summary: Crear orden desde un carrito
            parameters:
                - in: path
                  name: cid
                  required: true
                  description: ID del carrito
                  schema:
                      type: string
            requestBody:
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                paymentMethod:
                                    type: string
                                    enum: [credit_card, debit_card, paypal, cash_on_delivery]
                                shippingAddress:
                                    type: object
                                    properties:
                                        street:
                                            type: string
                                        city:
                                            type: string
                                        zip:
                                            type: string
                                        country:
                                            type: string
                            required:
                                - paymentMethod
                                - shippingAddress
                required: true
            responses:
                201:
                    description: Orden creada desde carrito
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/OrderResponse"
                404:
                    description: Carrito no encontrado
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

    /api/orders/{oid}:
        get:
            tags:
                - Orders
            summary: Obtener orden por ID
            parameters:
                - in: path
                  name: oid
                  required: true
                  description: ID de la orden
                  schema:
                      type: string
            responses:
                200:
                    description: Orden encontrada
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/OrderResponse"
                404:
                    description: Orden no encontrada
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

        put:
            tags:
                - Orders
            summary: Actualizar orden
            parameters:
                - in: path
                  name: oid
                  required: true
                  description: ID de la orden
                  schema:
                      type: string
            requestBody:
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                status:
                                    type: string
                                    enum: [pending, confirmed, shipped, delivered, cancelled]
                required: true
            responses:
                200:
                    description: Orden actualizada
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/OrderResponse"
                404:
                    description: Orden no encontrada
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

        delete:
            tags:
                - Orders
            summary: Eliminar orden
            parameters:
                - in: path
                  name: oid
                  required: true
                  description: ID de la orden
                  schema:
                      type: string
            responses:
                200:
                    description: Orden eliminada
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/OrderResponse"
                404:
                    description: Orden no encontrada
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/NotFoundResponse"

# Security schemes
components:
    securitySchemes:
        bearerAuth:
            type: http
            scheme: bearer
            bearerFormat: JWT

